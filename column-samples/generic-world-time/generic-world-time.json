{
  "$schema": "https://developer.microsoft.com/json-schemas/sp/v2/column-formatting.schema.json",
  "elmType": "div",
  "children": [
    {
      "elmType": "div",
      "style": {
        "position": "relative",
        "min-width": "90%",
        "display": "flex",
        "align-items": "center",
        "white-space": "nowrap"
      },
      "children": [
        {
          "elmType": "div",
          "style": {
            "width": "100%",
            "position": "absolute",
            "display": "flex",
            "flex-direction": "row",
            "justify-content": "space-around",
            "border": "2px solid",
            "font-size": "15px",
            "margin-left": "=if([$TimeDifference] % 1 == 0 , '0px', if([$TimeDifference] > 0 , ((abs(1 - [$TimeDifference] % 1) * 60) / (60 * 24) * 100) + '%' , ((abs([$TimeDifference] % 1) * 60) / (60 * 24) * 100) + '%'))"
          },
          "attributes": {
            "class": "ms-fontColor-themePrimary"
          },
          "children": [
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference]) % 24)) == 24 , 0, ceiling(abs((24 + [$TimeDifference]) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference]) % 24) <= 5 || abs((24 + [$TimeDifference]) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference]) % 24) <= 8 || abs((24 + [$TimeDifference]) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 1) % 24)) == 24, 0, ceiling(abs((24 + [$TimeDifference] + 1) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 1) % 24) <= 5 || abs((24 + [$TimeDifference] + 1) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 1) % 24) <= 8 || abs((24 + [$TimeDifference] + 1) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 2) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 2) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 2) % 24) <= 5 || abs((24 + [$TimeDifference] + 2) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 2) % 24) <= 8 || abs((24 + [$TimeDifference] + 2) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 3) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 3) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 3) % 24) <= 5 || abs((24 + [$TimeDifference] + 3) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 3) % 24) <= 8 || abs((24 + [$TimeDifference] + 3) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 4) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 4) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 4) % 24) <= 5 || abs((24 + [$TimeDifference] + 4) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 4) % 24) <= 8 || abs((24 + [$TimeDifference] + 4) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 5) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 5) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 5) % 24) <= 5 || abs((24 + [$TimeDifference] + 5) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 5) % 24) <= 8 || abs((24 + [$TimeDifference] + 5) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 6) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 6) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 6) % 24) <= 5 || abs((24 + [$TimeDifference] + 6) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 6) % 24) <= 8 || abs((24 + [$TimeDifference] + 6) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 7) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 7) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 7) % 24) <= 5 || abs((24 + [$TimeDifference] + 7) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 7) % 24) <= 8 || abs((24 + [$TimeDifference] + 7) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 8) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 8) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 8) % 24) <= 5 || abs((24 + [$TimeDifference] + 8) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 8) % 24) <= 8 || abs((24 + [$TimeDifference] + 8) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 9) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 9) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 9) % 24) <= 5 || abs((24 + [$TimeDifference] + 9) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 9) % 24) <= 8 || abs((24 + [$TimeDifference] + 9) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 10) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 10) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 10) % 24) <= 5 || abs((24 + [$TimeDifference] + 10) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 10) % 24) <= 8 || abs((24 + [$TimeDifference] + 10) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 11) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 11) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 11) % 24) <= 5 || abs((24 + [$TimeDifference] + 11) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 11) % 24) <= 8 || abs((24 + [$TimeDifference] + 11) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 12) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 12) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 12) % 24) <= 5 || abs((24 + [$TimeDifference] + 12) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 12) % 24) <= 8 || abs((24 + [$TimeDifference] + 12) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 13) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 13) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 13) % 24) <= 5 || abs((24 + [$TimeDifference] + 13) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 13) % 24) <= 8 || abs((24 + [$TimeDifference] + 13) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 14) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 14) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 14) % 24) <= 5 || abs((24 + [$TimeDifference] + 14) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 14) % 24) <= 8 || abs((24 + [$TimeDifference] + 14) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 15) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 15) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 15) % 24) <= 5 || abs((24 + [$TimeDifference] + 15) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 15) % 24) <= 8 || abs((24 + [$TimeDifference] + 15) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 16) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 16) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 16) % 24) <= 5 || abs((24 + [$TimeDifference] + 16) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 16) % 24) <= 8 || abs((24 + [$TimeDifference] + 16) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 17) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 17) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 17) % 24) <= 5 || abs((24 + [$TimeDifference] + 17) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 17) % 24) <= 8 || abs((24 + [$TimeDifference] + 17) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 18) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 18) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 18) % 24) <= 5 || abs((24 + [$TimeDifference] + 18) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 18) % 24) <= 8 || abs((24 + [$TimeDifference] + 18) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 19) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 19) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 19) % 24) <= 5 || abs((24 + [$TimeDifference] + 19) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 19) % 24) <= 8 || abs((24 + [$TimeDifference] + 19) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 20) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 20) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 20) % 24) <= 5 || abs((24 + [$TimeDifference] + 20) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 20) % 24) <= 8 || abs((24 + [$TimeDifference] + 20) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 21) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 21) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 21) % 24) <= 5 || abs((24 + [$TimeDifference] + 21) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 21) % 24) <= 8 || abs((24 + [$TimeDifference] + 21) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 22) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 22) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 22) % 24) <= 5 || abs((24 + [$TimeDifference] + 22) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 22) % 24) <= 8 || abs((24 + [$TimeDifference] + 22) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            },
            {
              "elmType": "div",
              "txtContent": "=if(ceiling(abs((24 + [$TimeDifference] + 23) % 24))==24 , 0, ceiling(abs((24 + [$TimeDifference] + 23) % 24)))",
              "style": {
                "width": "100%",
                "text-align": "center"
              },
              "attributes": {
                "class": "=if(abs((24 + [$TimeDifference] + 23) % 24) <= 5 || abs((24 + [$TimeDifference] + 23) % 24) >= 22 , 'ms-bgColor-themePrimary ms-fontColor-white' , if(abs((24 + [$TimeDifference] + 23) % 24) <= 8 || abs((24 + [$TimeDifference] + 23) % 24) >= 19 , 'ms-bgColor-themeLight' , ''))"
              }
            }
          ]
        },
        {
          "elmType": "div",
          "style": {
            "position": "absolute",
            "width": "7px",
            "height": "43px",
            "left": "=((Number(@now) - Number(Date(getYear(@now) + '/' + (getMonth(@now) + 1) + '/' + getDate(@now)))) / (3600000 * 24)) * 100 + '%'",
            "cursor": "pointer"
          },
          "attributes": {
            "class": "ms-bgColor-neutralTertiary ms-bgColor-neutralPrimary--hover"
          },
          "customCardProps": {
            "openOnEvent": "hover",
            "directionalHint": "rightCenter",
            "isBeakVisible": true,
            "formatter": {
              "elmType": "div",
              "txtContent": "=Date(Number(@now) + ([$TimeDifference] * 3600000))",
              "style": {
                "padding": "10px 20px",
                "font-weight": "bold",
                "font-size": "20px"
              }
            }
          }
        }
      ]
    }
  ]
}